{"ast":null,"code":"//turn {{name|one|two|three}} into [name, one, two, three]\nvar pipeSplitter = function pipeSplitter(tmpl) {\n  //start with a naiive '|' split\n  var arr = tmpl.split(/\\n?\\|/); //we've split by '|', which is pretty lame\n  //look for broken-up links and fix them :/\n\n  arr.forEach(function (a, i) {\n    if (a === null) {\n      return;\n    } //has '[[' but no ']]'\n\n\n    if (/\\[\\[[^\\]]+$/.test(a) || /\\{\\{[^\\}]+$/.test(a)) {\n      arr[i + 1] = arr[i] + '|' + arr[i + 1];\n      arr[i] = null;\n    }\n  }); //cleanup any mistakes we've made\n\n  arr = arr.filter(function (a) {\n    return a !== null;\n  });\n  arr = arr.map(function (a) {\n    return (a || '').trim();\n  }); //remove empty fields, only at the end:\n\n  for (var i = arr.length - 1; i >= 0; i -= 1) {\n    if (arr[i] === '') {\n      arr.pop();\n    }\n\n    break;\n  }\n\n  return arr;\n};\n\nmodule.exports = pipeSplitter;","map":null,"metadata":{},"sourceType":"script"}