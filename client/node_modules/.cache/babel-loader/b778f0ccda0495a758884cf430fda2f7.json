{"ast":null,"code":"var setDefaults = require('../_lib/setDefaults');\n\nvar isNumber = /^[0-9,.]+$/;\nvar defaults = {\n  text: true,\n  links: true,\n  formatting: true,\n  dates: true,\n  numbers: true\n};\n\nvar toJSON = function toJSON(s, options) {\n  options = setDefaults(options, defaults);\n  var data = {};\n  var text = s.plaintext();\n\n  if (options.text === true) {\n    data.text = text;\n  } //add number field\n\n\n  if (options.numbers === true && isNumber.test(text)) {\n    var num = Number(text.replace(/,/g, ''));\n\n    if (isNaN(num) === false) {\n      data.number = num;\n    }\n  }\n\n  if (options.links && s.links().length > 0) {\n    data.links = s.links();\n  }\n\n  if (options.formatting && s.data.fmt) {\n    data.formatting = s.data.fmt;\n  }\n\n  if (options.dates && s.data.dates !== undefined) {\n    data.dates = s.data.dates;\n  }\n\n  return data;\n};\n\nmodule.exports = toJSON;","map":null,"metadata":{},"sourceType":"script"}