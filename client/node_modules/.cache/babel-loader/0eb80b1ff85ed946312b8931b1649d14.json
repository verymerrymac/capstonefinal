{"ast":null,"code":"var tableParser = require('../table/parse');\n\nvar headings = ['res', 'record', 'opponent', 'method', 'event', 'date', 'round', 'time', 'location', 'notes']; //https://en.wikipedia.org/wiki/Template:MMA_record_start\n\nvar parseMMA = function parseMMA(wiki, section) {\n  wiki = wiki.replace(/\\{\\{mma record start[\\s\\S]+?\\{\\{end\\}\\}/gi, function (tmpl) {\n    tmpl = tmpl.replace(/^\\{\\{.*?\\}\\}/, '');\n    tmpl = tmpl.replace(/\\{\\{end\\}\\}/i, '');\n    var headers = '! ' + headings.join(' !! ');\n    var table = '{|\\n' + headers + '\\n' + tmpl + '\\n|}';\n    var rows = tableParser(table);\n    rows = rows.map(function (row) {\n      Object.keys(row).forEach(function (k) {\n        row[k] = row[k].text();\n      });\n      return row;\n    });\n    section.templates.push({\n      template: 'mma record start',\n      data: rows\n    });\n    return '';\n  });\n  return wiki;\n};\n\nmodule.exports = parseMMA;","map":null,"metadata":{},"sourceType":"script"}