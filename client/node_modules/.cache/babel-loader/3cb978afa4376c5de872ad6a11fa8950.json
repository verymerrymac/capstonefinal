{"ast":null,"code":"var Paragraph = require('./Paragraph');\n\nvar find_recursive = require('../_lib/recursive_match');\n\nvar parseSentences = require('../04-sentence').addSentences;\n\nvar twoNewLines = /\\r?\\n\\r?\\n/;\nvar parse = {\n  image: require('../image'),\n  list: require('./list')\n};\n\nvar parseParagraphs = function parseParagraphs(wiki) {\n  var pList = wiki.split(twoNewLines); //don't create empty paragraphs\n\n  pList = pList.filter(function (p) {\n    return p && p.trim().length > 0;\n  });\n  pList = pList.map(function (str) {\n    var data = {\n      lists: [],\n      sentences: [],\n      images: []\n    }; //parse the lists\n\n    str = parse.list(str, data); //parse+remove scary '[[ [[]] ]]' stuff\n\n    var matches = find_recursive('[', ']', str); // parse images\n\n    str = parse.image(matches, data, str); //parse the sentences\n\n    parseSentences(str, data);\n    return new Paragraph(data);\n  });\n  return {\n    paragraphs: pList,\n    wiki: wiki\n  };\n};\n\nmodule.exports = parseParagraphs;","map":null,"metadata":{},"sourceType":"script"}