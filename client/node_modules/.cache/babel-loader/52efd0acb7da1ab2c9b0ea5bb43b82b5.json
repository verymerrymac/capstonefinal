{"ast":null,"code":"var parse = require('../_parsers/parse');\n\nvar flags = require('../../_data/flags');\n\nvar sports = {\n  player: function player(tmpl, r) {\n    var res = parse(tmpl, ['number', 'country', 'name', 'dl']);\n    r.templates.push(res);\n    var str = \"[[\".concat(res.name, \"]]\");\n\n    if (res.country) {\n      var country = (res.country || '').toLowerCase();\n      var flag = flags.find(function (a) {\n        return country === a[1] || country === a[2];\n      }) || [];\n\n      if (flag && flag[0]) {\n        str = flag[0] + '  ' + str;\n      }\n    }\n\n    if (res.number) {\n      str = res.number + ' ' + str;\n    }\n\n    return str;\n  },\n  //https://en.wikipedia.org/wiki/Template:Goal\n  goal: function goal(tmpl, r) {\n    var res = parse(tmpl);\n    var obj = {\n      template: 'goal',\n      data: []\n    };\n    var arr = res.list || [];\n\n    for (var i = 0; i < arr.length; i += 2) {\n      obj.data.push({\n        min: arr[i],\n        note: arr[i + 1] || ''\n      });\n    }\n\n    r.templates.push(obj); //generate a little text summary\n\n    var summary = '⚽ ';\n    summary += obj.data.map(function (o) {\n      var note = o.note;\n\n      if (note) {\n        note = \" (\".concat(note, \")\");\n      }\n\n      return o.min + '\\'' + note;\n    }).join(', ');\n    return summary;\n  },\n  //yellow card\n  yel: function yel(tmpl, r) {\n    var obj = parse(tmpl, ['min']);\n    r.templates.push(obj);\n\n    if (obj.min) {\n      return \"yellow: \".concat(obj.min || '', \"'\"); //no yellow-card emoji\n    }\n\n    return '';\n  },\n  'subon': function subon(tmpl, r) {\n    var obj = parse(tmpl, ['min']);\n    r.templates.push(obj);\n\n    if (obj.min) {\n      return \"sub on: \".concat(obj.min || '', \"'\"); //no yellow-card emoji\n    }\n\n    return '';\n  },\n  'suboff': function suboff(tmpl, r) {\n    var obj = parse(tmpl, ['min']);\n    r.templates.push(obj);\n\n    if (obj.min) {\n      return \"sub off: \".concat(obj.min || '', \"'\"); //no yellow-card emoji\n    }\n\n    return '';\n  },\n  'pengoal': function pengoal(tmpl, r) {\n    r.templates.push({\n      template: 'pengoal'\n    });\n    return '✅';\n  },\n  'penmiss': function penmiss(tmpl, r) {\n    r.templates.push({\n      template: 'penmiss'\n    });\n    return '❌';\n  },\n  //'red' card - {{sent off|cards|min1|min2}}\n  'sent off': function sentOff(tmpl, r) {\n    var obj = parse(tmpl, ['cards']);\n    var result = {\n      template: 'sent off',\n      cards: obj.cards,\n      minutes: obj.list || []\n    };\n    r.templates.push(result);\n    var mins = result.minutes.map(function (m) {\n      return m + '\\'';\n    }).join(', ');\n    return 'sent off: ' + mins;\n  }\n};\nmodule.exports = sports;","map":null,"metadata":{},"sourceType":"script"}