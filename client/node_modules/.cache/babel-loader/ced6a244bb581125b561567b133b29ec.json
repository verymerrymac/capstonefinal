{"ast":null,"code":"var parseSentence = require('../../04-sentence/').oneSentence; //xml <math>y=mx+b</math> support\n//https://en.wikipedia.org/wiki/Help:Displaying_a_formula\n\n\nvar parseMath = function parseMath(wiki, section) {\n  wiki = wiki.replace(/<math([^>]*?)>([\\s\\S]+?)<\\/math>/g, function (_, attrs, inside) {\n    //clean it up a little?\n    var formula = parseSentence(inside).text();\n    section.templates.push({\n      template: 'math',\n      formula: formula,\n      raw: inside\n    }); //should we atleast try to render it in plaintext? :/\n\n    if (formula && formula.length < 12) {\n      return formula;\n    }\n\n    return '';\n  }); //try chemistry version too\n\n  wiki = wiki.replace(/<chem([^>]*?)>([\\s\\S]+?)<\\/chem>/g, function (_, attrs, inside) {\n    section.templates.push({\n      template: 'chem',\n      data: inside\n    });\n    return '';\n  });\n  return wiki;\n};\n\nmodule.exports = parseMath;","map":null,"metadata":{},"sourceType":"script"}