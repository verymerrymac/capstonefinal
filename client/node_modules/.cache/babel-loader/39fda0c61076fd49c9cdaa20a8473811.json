{"ast":null,"code":"var kill_xml = require('./kill_xml'); //this mostly-formatting stuff can be cleaned-up first, to make life easier\n\n\nfunction preProcess(r, wiki, options) {\n  //remove comments\n  wiki = wiki.replace(/<!--[\\s\\S]{0,2000}?-->/g, '');\n  wiki = wiki.replace(/__(NOTOC|NOEDITSECTION|FORCETOC|TOC)__/ig, ''); //signitures\n\n  wiki = wiki.replace(/~~{1,3}/g, ''); //windows newlines\n\n  wiki = wiki.replace(/\\r/g, ''); //japanese periods - '。'\n\n  wiki = wiki.replace(/\\u3002/g, '. '); //horizontal rule\n\n  wiki = wiki.replace(/----/g, ''); //formatting for templates-in-templates...\n\n  wiki = wiki.replace(/\\{\\{\\}\\}/g, ' – ');\n  wiki = wiki.replace(/\\{\\{\\\\\\}\\}/g, ' / '); //space\n\n  wiki = wiki.replace(/&nbsp;/g, ' '); //give it the inglorious send-off it deserves..\n\n  wiki = kill_xml(wiki, r, options); //({{template}},{{template}}) leaves empty parentheses\n\n  wiki = wiki.replace(/\\([,;: ]+?\\)/g, ''); //these templates just screw things up, too\n\n  wiki = wiki.replace(/{{(baseball|basketball) (primary|secondary) (style|color).*?\\}\\}/i, '');\n  return wiki;\n}\n\nmodule.exports = preProcess;","map":null,"metadata":{},"sourceType":"script"}