{"ast":null,"code":"var convertDMS = require('./dms-format');\n\nvar parse = require('../_parsers/parse');\n\nvar round = function round(num) {\n  if (typeof num !== 'number') {\n    return num;\n  }\n\n  var places = 100000;\n  return Math.round(num * places) / places;\n}; //these hemispheres mean negative decimals\n\n\nvar negative = {\n  s: true,\n  w: true\n};\n\nvar findLatLng = function findLatLng(arr) {\n  var types = arr.map(function (s) {\n    return typeof s;\n  }).join('|'); //support {{lat|lng}}\n\n  if (arr.length === 2 && types === 'number|number') {\n    return {\n      lat: arr[0],\n      lon: arr[1]\n    };\n  } //support {{dd|N/S|dd|E/W}}\n\n\n  if (arr.length === 4 && types === 'number|string|number|string') {\n    if (negative[arr[1].toLowerCase()]) {\n      arr[0] *= -1;\n    }\n\n    if (arr[3].toLowerCase() === 'w') {\n      arr[2] *= -1;\n    }\n\n    return {\n      lat: arr[0],\n      lon: arr[2]\n    };\n  } //support {{dd|mm|N/S|dd|mm|E/W}}\n\n\n  if (arr.length === 6) {\n    return {\n      lat: convertDMS(arr.slice(0, 3)),\n      lon: convertDMS(arr.slice(3))\n    };\n  } //support {{dd|mm|ss|N/S|dd|mm|ss|E/W}}\n\n\n  if (arr.length === 8) {\n    return {\n      lat: convertDMS(arr.slice(0, 4)),\n      lon: convertDMS(arr.slice(4))\n    };\n  }\n\n  return {};\n};\n\nvar parseParams = function parseParams(obj) {\n  obj.list = obj.list || [];\n  obj.list = obj.list.map(function (str) {\n    var num = Number(str);\n\n    if (!isNaN(num)) {\n      return num;\n    } //these are weird\n\n\n    var split = str.split(/:/);\n\n    if (split.length > 1) {\n      obj.props = obj.props || {};\n      obj.props[split[0]] = split.slice(1).join(':');\n      return null;\n    }\n\n    return str;\n  });\n  obj.list = obj.list.filter(function (s) {\n    return s !== null;\n  });\n  return obj;\n};\n\nvar parseCoor = function parseCoor(tmpl) {\n  var obj = parse(tmpl);\n  obj = parseParams(obj);\n  var tmp = findLatLng(obj.list);\n  obj.lat = round(tmp.lat);\n  obj.lon = round(tmp.lon);\n  obj.template = 'coord';\n  delete obj.list;\n  return obj;\n};\n\nmodule.exports = parseCoor; // {{Coor title dms|dd|mm|ss|N/S|dd|mm|ss|E/W|template parameters}}\n// {{Coor title dec|latitude|longitude|template parameters}}\n// {{Coor dms|dd|mm|ss|N/S|dd|mm|ss|E/W|template parameters}}\n// {{Coor dm|dd|mm|N/S|dd|mm|E/W|template parameters}}\n// {{Coor dec|latitude|longitude|template parameters}}\n// {{coord|latitude|longitude|coordinate parameters|template parameters}}\n// {{coord|dd|N/S|dd|E/W|coordinate parameters|template parameters}}\n// {{coord|dd|mm|N/S|dd|mm|E/W|coordinate parameters|template parameters}}\n// {{coord|dd|mm|ss|N/S|dd|mm|ss|E/W|coordinate parameters|template parameters}}","map":null,"metadata":{},"sourceType":"script"}