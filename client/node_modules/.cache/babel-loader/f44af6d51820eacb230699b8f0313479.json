{"ast":null,"code":"var setDefaults = require('../_lib/setDefaults');\n\nvar defaults = {\n  redirects: true,\n  infoboxes: true,\n  templates: true,\n  sections: true\n}; // we should try to make this look like the wikipedia does, i guess.\n\nvar softRedirect = function softRedirect(doc) {\n  var link = doc.redirectTo();\n  var href = link.page;\n  href = './' + href.replace(/ /g, '_');\n\n  if (link.anchor) {\n    href += '#' + link.anchor;\n  }\n\n  return \"\\u21B3 [\".concat(link.text, \"](\").concat(href, \")\");\n}; //turn a Doc object into a markdown string\n\n\nvar toMarkdown = function toMarkdown(doc, options) {\n  options = setDefaults(options, defaults);\n  var data = doc.data;\n  var md = ''; //if it's a redirect page, give it a 'soft landing':\n\n  if (options.redirects === true && doc.isRedirect() === true) {\n    return softRedirect(doc); //end it here\n  } //render infoboxes (up at the top)\n\n\n  if (options.infoboxes === true && options.templates === true) {\n    md += doc.infoboxes().map(function (infobox) {\n      return infobox.markdown(options);\n    }).join('\\n\\n');\n  } //render each section\n\n\n  if (options.sections === true || options.paragraphs === true || options.sentences === true) {\n    md += data.sections.map(function (s) {\n      return s.markdown(options);\n    }).join('\\n\\n');\n  } //default false\n\n\n  if (options.citations === true) {\n    md += '## References';\n    md += doc.citations().map(function (c) {\n      return c.json(options);\n    }).join('\\n');\n  }\n\n  return md;\n};\n\nmodule.exports = toMarkdown;","map":null,"metadata":{},"sourceType":"script"}