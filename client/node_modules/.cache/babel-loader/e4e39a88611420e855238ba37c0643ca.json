{"ast":null,"code":"var getRowSpan = /.*rowspan *?= *?[\"']?([0-9]+)[\"']?[ \\|]*/;\nvar getColSpan = /.*colspan *?= *?[\"']?([0-9]+)[\"']?[ \\|]*/; //colspans stretch ←left/right→\n\nvar doColSpan = function doColSpan(rows) {\n  rows.forEach(function (row, r) {\n    row.forEach(function (str, c) {\n      var m = str.match(getColSpan);\n\n      if (m !== null) {\n        var num = parseInt(m[1], 10); //...maybe if num is so big, and centered, remove it?\n\n        if (num > 3) {\n          rows[r] = [];\n          return;\n        } //splice-in n empty columns right here\n\n\n        row[c] = str.replace(getColSpan, '');\n\n        for (var i = 1; i < num; i += 1) {\n          row.splice(c + 1, 0, '');\n        }\n      }\n    });\n  });\n  rows = rows.filter(function (r) {\n    return r.length > 0;\n  });\n  return rows;\n}; //colspans stretch up/down\n\n\nvar doRowSpan = function doRowSpan(rows) {\n  rows.forEach(function (row, r) {\n    row.forEach(function (str, c) {\n      var m = str.match(getRowSpan);\n\n      if (m !== null) {\n        var num = parseInt(m[1], 10); //copy this cell down n rows\n\n        str = str.replace(getRowSpan, '');\n        row[c] = str;\n\n        for (var i = r + 1; i < r + num; i += 1) {\n          if (!rows[i]) {\n            break;\n          }\n\n          rows[i].splice(c, 0, str);\n        }\n      }\n    });\n  });\n  return rows;\n}; //\n\n\nvar handleSpans = function handleSpans(rows) {\n  rows = doRowSpan(rows);\n  rows = doColSpan(rows);\n  return rows;\n};\n\nmodule.exports = handleSpans;","map":null,"metadata":{},"sourceType":"script"}