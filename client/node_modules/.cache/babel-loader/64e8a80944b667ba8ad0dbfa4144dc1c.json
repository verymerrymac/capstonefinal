{"ast":null,"code":"var smartReplace = require('../_lib/smartReplace');\n\nvar helpers = require('../_lib/helpers');\n\nvar setDefaults = require('../_lib/setDefaults');\n\nvar defaults = {\n  links: true,\n  formatting: true\n}; // add `[text](href)` to the text\n\nvar doLink = function doLink(md, link) {\n  var href = ''; //if it's an external link, we good\n\n  if (link.site) {\n    href = link.site;\n  } else {\n    //otherwise, make it a relative internal link\n    href = helpers.capitalise(link.page);\n    href = './' + href.replace(/ /g, '_'); //add anchor\n\n    if (link.anchor) {\n      href += \"#\".concat(link.anchor);\n    }\n  }\n\n  var str = link.text || link.page;\n  var mdLink = '[' + str + '](' + href + ')';\n  md = smartReplace(md, str, mdLink);\n  return md;\n}; //create links, bold, italic in markdown\n\n\nvar toMarkdown = function toMarkdown(sentence, options) {\n  options = setDefaults(options, defaults);\n  var md = sentence.text(); //turn links back into links\n\n  if (options.links === true) {\n    sentence.links().forEach(function (link) {\n      md = doLink(md, link);\n    });\n  } //turn bolds into **bold**\n\n\n  if (options.formatting === true) {\n    sentence.bold().forEach(function (b) {\n      md = smartReplace(md, b, '**' + b + '**');\n    }); //support *italics*\n\n    sentence.italic().forEach(function (i) {\n      md = smartReplace(md, i, '*' + i + '*');\n    });\n  }\n\n  return md;\n};\n\nmodule.exports = toMarkdown;","map":null,"metadata":{},"sourceType":"script"}