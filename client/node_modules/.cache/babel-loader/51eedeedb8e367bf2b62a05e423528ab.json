{"ast":null,"code":"var setDefaults = require('../_lib/setDefaults');\n\nvar encode = require('../_lib/encode');\n\nvar defaults = {\n  headers: true,\n  depth: true,\n  paragraphs: true,\n  images: true,\n  tables: true,\n  templates: true,\n  infoboxes: true,\n  lists: true,\n  references: true\n}; //\n\nvar toJSON = function toJSON(section, options) {\n  options = setDefaults(options, defaults);\n  var data = {};\n\n  if (options.headers === true) {\n    data.title = section.title();\n  }\n\n  if (options.depth === true) {\n    data.depth = section.depth;\n  } //these return objects\n\n\n  if (options.paragraphs === true) {\n    var paragraphs = section.paragraphs().map(function (p) {\n      return p.json(options);\n    });\n\n    if (paragraphs.length > 0) {\n      data.paragraphs = paragraphs;\n    }\n  } //image json data\n\n\n  if (options.images === true) {\n    var images = section.images().map(function (img) {\n      return img.json(options);\n    });\n\n    if (images.length > 0) {\n      data.images = images;\n    }\n  } //table json data\n\n\n  if (options.tables === true) {\n    var tables = section.tables().map(function (t) {\n      return t.json(options);\n    });\n\n    if (tables.length > 0) {\n      data.tables = tables;\n    }\n  } //template json data\n\n\n  if (options.templates === true) {\n    var templates = section.templates();\n\n    if (templates.length > 0) {\n      data.templates = templates; //encode them, for mongodb\n\n      if (options.encode === true) {\n        data.templates.forEach(function (t) {\n          return encode.encodeObj(t);\n        });\n      }\n    }\n  } //infobox json data\n\n\n  if (options.infoboxes === true) {\n    var infoboxes = section.infoboxes().map(function (i) {\n      return i.json(options);\n    });\n\n    if (infoboxes.length > 0) {\n      data.infoboxes = infoboxes;\n    }\n  } //list json data\n\n\n  if (options.lists === true) {\n    var lists = section.lists().map(function (list) {\n      return list.json(options);\n    });\n\n    if (lists.length > 0) {\n      data.lists = lists;\n    }\n  } //list references - default true\n\n\n  if (options.references === true || options.citations === true) {\n    var references = section.references().map(function (ref) {\n      return ref.json(options);\n    });\n\n    if (references.length > 0) {\n      data.references = references;\n    }\n  } //default off\n\n\n  if (options.sentences === true) {\n    data.sentences = section.sentences().map(function (s) {\n      return s.json(options);\n    });\n  }\n\n  return data;\n};\n\nmodule.exports = toJSON;","map":null,"metadata":{},"sourceType":"script"}