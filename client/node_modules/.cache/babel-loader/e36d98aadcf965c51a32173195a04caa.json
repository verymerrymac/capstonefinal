{"ast":null,"code":"var smartReplace = require('../_lib/smartReplace');\n\nvar helpers = require('../_lib/helpers');\n\nvar setDefaults = require('../_lib/setDefaults');\n\nvar defaults = {\n  links: true,\n  formatting: true\n}; // create links, bold, italic in html\n\nvar toLatex = function toLatex(sentence, options) {\n  options = setDefaults(options, defaults);\n  var text = sentence.plaintext(); //turn links back into links\n\n  if (options.links === true && sentence.links().length > 0) {\n    sentence.links().forEach(function (link) {\n      var href = '';\n\n      if (link.site) {\n        //use an external link\n        href = link.site;\n      } else {\n        //otherwise, make it a relative internal link\n        href = helpers.capitalise(link.page);\n        href = './' + href.replace(/ /g, '_'); //add anchor\n\n        if (link.anchor) {\n          href += \"#\".concat(link.anchor);\n        }\n      }\n\n      var str = link.text || link.page;\n      var tag = '\\\\href{' + href + '}{' + str + '}';\n      text = smartReplace(text, str, tag);\n    });\n  }\n\n  if (options.formatting === true) {\n    if (sentence.data.fmt) {\n      if (sentence.data.fmt.bold) {\n        sentence.data.fmt.bold.forEach(function (str) {\n          var tag = '\\\\textbf{' + str + '}';\n          text = smartReplace(text, str, tag);\n        });\n      }\n\n      if (sentence.data.fmt.italic) {\n        sentence.data.fmt.italic.forEach(function (str) {\n          var tag = '\\\\textit{' + str + '}';\n          text = smartReplace(text, str, tag);\n        });\n      }\n    }\n  }\n\n  return text;\n};\n\nmodule.exports = toLatex;","map":null,"metadata":{},"sourceType":"script"}